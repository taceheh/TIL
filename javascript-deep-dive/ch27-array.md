# [JS] 27장. 배열 (Array)

## 1. 배열이란? (Definition)

> "여러 개의 값을 순차적으로 나열한 자료구조로, 자바스크립트의 배열은 일반적인 배열과 달리 해시 테이블로 구현된 객체"

- **핵심 키워드**: `희소 배열(Sparse Array)`, `length 프로퍼티`, `고차 함수(Higher-Order Function)`, `불변성(Immutability)`
- **한 줄 요약**: 자바스크립트 배열은 인덱스를 키(Key)로 가지며 `length` 프로퍼티를 갖는 특수한 객체이며, 이를 통한 데이터 추가/삭제 성능 최적화 달성.

<br>

## 2. 핵심 전제 지식 (Prerequisites)

### 2.1 자료구조의 배열 vs JS 배열

- **밀집 배열(Dense Array)**: C나 Java의 배열. 메모리 공간에 빈틈없이 연속적 나열. 인덱스 접근의 빠른 속도이지만, 중간 요소 끼워 넣기나 삭제 시 비용 증가(밀어내기/당기기 필요).
- **희소 배열(Sparse Array)**: 자바스크립트 배열. 메모리상 연속성 부재 가능성 및 특정 인덱스의 빈 공간 발생 가능. 객체이므로 접근 속도는 느리지만 요소 추가/삭제의 상대적 빠른 속도 제공.

<br>

## 3. 동작 원리 (Mechanism)

### 3.1 객체로서의 배열

자바스크립트 엔진의 배열 관리 방식.

```javascript
// 우리가 작성하는 배열
const arr = ['a', 'b', 'c'];

// 엔진이 이해하는 구조 (개념적)
const arrObj = {
  '0': 'a',
  '1': 'b',
  '2': 'c',
  length: 3,
  __proto__: Array.prototype
};
```

- **인덱스**: 사실상 프로퍼티 키(문자열) 역할.
- **`length` 프로퍼티**: 요소 개수에 맞춘 자동 갱신이지만, 임의로의 할당을 통한 배열 절단 가능.

<br>

## 4. 활용 사례: 배열 고차 함수 (Use Cases) ⭐

리액트 개발의 **80%** 구성은 이 함수들로 이루어짐. (원본 변경 없이 새로운 배열 반환이 핵심!)

### 4.1 `map` (변환)

요소의 1:1 매핑을 통한 새로운 배열 생성.

예: `[1, 2, 3]` → `[2, 4, 6]`

### 4.2 `filter` (추출)

조건에 맞는 요소만의 골라내기를 통한 새로운 배열 생성.

예: `[1, 2, 3, 4]` → (짝수만) → `[2, 4]`

### 4.3 `reduce` (압축/집계)

모든 요소의 순회를 통한 하나의 결과값(누적값) 도출.

예: `[1, 2, 3]` → (총합) → `6`

<br>

## 5. 자주 발생하는 실수 (Common Mistakes)

### 5.1 `delete` 연산자 사용

배열도 객체라 `delete arr[1]`의 동작이 가능하지만, 요소 삭제 후에도 `length`의 감소 없이 **구멍(empty)** 발생. (희소 배열로의 변환)

**해결**: `splice` 메서드 사용 또는 `filter`를 통한 제외 필요.

### 5.2 `forEach`와 `map`의 혼동

- **`forEach`**: 반환값이 `undefined`. 단순 반복문의 대체 역할. (중간 `break` 불가)
- **`map`**: 콜백 함수의 반환값들로 구성된 새로운 배열 반환.

<br>

## 6. 헷갈렸던 부분 (Confusing Points)

### 6.1 얕은 복사(Shallow Copy)

스프레드 문법 `[...arr]`이나 `slice()`로의 배열 복사 시, 배열 껍데기는 새로 생성되지만 내부의 객체 요소는 참조값 공유.

- 즉, 복사한 배열 내부의 객체 수정 시 원본 배열 내부의 객체도의 변경 발생.
